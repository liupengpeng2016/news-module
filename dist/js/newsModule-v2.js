"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};"undefined"==typeof console&&(window.console={log:function(){},error:function(){}});var $l=function(t,e){return new DomOperate(t,e)};function DomOperate(t,e){for(var i=this.init(t,e),n=0;n<i.length;n++)this[n]=i[n];this.length=i.length}DomOperate.prototype={constructor:DomOperate,init:function(t,e){var i=this.strType(t);if("id"===i){var n=document.getElementById(t.slice(1));return n?[n]:[]}if("tag"===i)return(e||document).getElementsByTagName(t);if("class"===i){for(var s=(e||document).getElementsByTagName("*"),a=[],o=new RegExp("(\\s+|^)"+t.slice(1)+"(\\s+|$)","i"),r=0;r<s.length;r++)o.test(s[r].className)&&a.push(s[r]);return a}return"dom"===i?[t]:"domArray"===i?t:[]},strType:function(t){if("object"===(void 0===t?"undefined":_typeof(t))){if(t instanceof Array)return"domArray";if(t.ownerDocument===document)return"dom"}else{if("string"!=typeof t)return null;if(/^#.+/.test(t))return"id";if(/^\..+/.test(t))return"class";if(/^[^.#]/.test(t))return"tagName"}},addClass:function(t){for(var e=0;e<this.length;e++){if($l(this[e]).hasClass(t))return;this[e].className+=" "+t}return this},removeClass:function(t){for(var e=new RegExp("\\s*"+t),i=0;i<this.length;i++)this[i].className=this[i].className.replace(e,"");return this},hasClass:function(t){var e=new RegExp("(\\s+|^)+"+t+"(\\s+|$)");return-1!=this[0].className.search(e)},hasAttr:function(t){return null!==this[0].getAttribute(t)},attr:function(){if(this[0])return 1==arguments.length?this[0].getAttribute(arguments[0]):(this[0].setAttribute(arguments[0],arguments[1]),this)},child:function(t){for(var e=this[0].childNodes||[],i=[],n=0;n<e.length;n++)t?e[n].id!=t.slice(1)&&e[n].className!=t.slice(1)&&e[n].nodeName.toLowerCase()!=t||i.push(e[n]):e[n].tagName&&i.push(e[n]);return $l(i)},eq:function(t){return $l(this[t])},trigger:function(e){var i;try{i=new Event(e,{bubbles:!0})}catch(t){document.createEvent&&(i=document.createEvent("Event")).initEvent(e,!0,!1)}for(var t=0;t<this.length;t++)this[t].dispatchEvent?this[t].dispatchEvent(i):this[t].fireEvent("on"+e)},index:function(t){var e=$l(this[0].parentNode).child();if(parseInt(t))return $l(e[t]);for(var i=0;i<e.length;i++)if(this[0]===e[i])return i},on:function(t,i,n){var a=this;2==arguments.length&&(n=arguments[1],i="");for(var e=function(t){var e=function t(e,i){var n;if(e===document.body)return null;i||(n=e);var s=a.strType(i);"class"===s?new RegExp("(\\s+|^)"+i.slice(1)+"(\\s+|$)").test(e.className)&&(n=e):"id"===s?new RegExp("(\\s+|^)"+i.slice(1)+"(\\s+|$)").test(e.id)&&(n=e):"tagName"===s&&new RegExp("(\\s+|^)"+i+"(\\s+|$)","i").test(e.tagName)&&(n=e);return void 0===n?t(e.parentNode,i):n}((t=t||event).target||t.srcElement,i);e&&n.call(e,t)},s=0;s<a.length;s++)window.addEventListener?a[s].addEventListener(t,e):window.attachEvent&&a[s].attachEvent("on"+t,e);return a},offset:function(){return function t(e){return e?{top:e.offsetTop+t(e.offsetParent).top,left:e.offsetLeft+t(e.offsetParent).left}:{top:0,left:0}}(this[0])},isInView:function(t,e){var i,n,s,a,o,r=!1;return n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=this.offset().top,t?(i=this[0].offsetParent.scrollTop,s=this[0].offsetParent.clientHeight,this[0].offsetTop+e<=i+s&&o-i+e<=n+a&&(r=!0)):o+e<=n+a&&(r=!0),r},find:function(t){return new DomOperate(t,this[0])}};var $lMethods={ajax:function(e){var t,i;if(i=function t(e,i){var n="",s=!!(i=i||"");for(var a in e)e.hasOwnProperty(a)&&("object"===_typeof(e[a])?n+=t(e[a],i+(s?"[":"")+a+(s?"]":"")):n+=i+(s?"[":"")+a+(s?"]":"")+"="+encodeURIComponent(e[a])+"&");return n}(e.params).slice(0,-1),"jsonp"===e.method){var n=document.createElement("script");n.onerror=n.onabort=function(){n.loaded||(this.loaded=!0,e.error&&e.error())};var s=e.jsonp||"callback",a=e.jsonpCallback||"n"+Math.random().toString(26).slice(2);window[a]=function(t){n.loaded=!0,e.success(t)};var o=(i?"&":"")+s+"="+a;n.src=e.url+"?"+i+o,document.getElementsByTagName("head")[0].appendChild(n),setTimeout(function(){n.loaded||(window[a]=null,n.loaded=!0,e.error&&e.error())},e.timeout||3e3)}else t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),"get"===e.method?t.open("get",e.url+"?"+i,!0):"post"===e.method&&t.open("post",e.url,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&(200==t.status||304==t.status?e.success&&e.success(t.responseText):e.error&&e.error()),t.send("post"===e.method?i:null)}},iev:function(){var t=navigator.userAgent,e=/msie \d+/i.exec(t);return e?parseInt(e[0].split(" ")[1]):void 0},cookie:function(){var t=arguments[0],e=arguments[1],i=arguments[2];if(!(1<arguments.length)){var n=new RegExp(t+"=[^;=]*");return document.cookie.match(n)&&document.cookie.match(n)[0].split("=")[1]}var s=new Date,a=s.getFullYear(),o=s.getDate();"forever"===i?s.setFullYear(a+100):s.setDate(o+i),document.cookie=t+"="+e+(i?";expires="+s.toGMTString():"")},open:function(t){var e="n256"+Math.random().toString(26).slice(2),i=document.createElement("a");i.href=t,i.id=e,i.target="_blank",i.style.display="none",document.body.appendChild(i),setTimeout(function(){document.getElementById(e).click()},0)},parseTime:function(t){function e(t){return 10<=t?t:"0"+t}(t=new Date(t)).getFullYear();var i=t.getMonth()+1,n=t.getDate(),s=t.getHours(),a=t.getMinutes();t.getSeconds();return e(i)+"月"+e(n)+"日 "+e(s)+":"+e(a)}};for(var i in $lMethods)$lMethods.hasOwnProperty(i)&&($l[i]=$lMethods[i]);function NewsModule(t){var e;this.containerId=t.containerId,this.adsenseid=t.adsenseid,this.newsAdsenseid=t.newsAdsenseid,this.statisticsInterval=t.statisticsInterval||1e3,this.tabData=t.tabData||[["头条","toutiao"]],this.newsNumPer=t.newsNumPer||18,this.newsNumFirst=t.newsNumFirst||18,this.newsRadio=t.newsRadio||3,this.showAd=!1!==t.showAd,this.newsOrigin=t.newsOrigin||"dongfang",this.instance=t.instance||0,this.adConfig=t.adConfig||{baidu:.3,360:.7},this.replace360Ad=!1!==t.replace360Ad,this.loadPage=t.loadPage||5,this.reloadInterval=t.reloadInterval||3e3,this.reloadTimes=t.reloadTimes||3,this.maxPage=t.maxPage||10,this.isShowTab=!1!==t.isShowTab,this.baiduAdUrl=t.baiduAdUrl||"./ads/baiduAd.html",this.topInstance=t.topInstance||0,this.showSpace=t.showSpace||0,this.changeTabWay=t.changeTabWay||1,this.actionAtBottom=t.actionAtBottom||"load",this.containerHeight=t.containerHeight||0,this.newsMode=t.newsMode||3,this.adMode=t.adMode||2,this.forceStretchNewsImg=!0===t.forceStretchNewsImg,this.forceStretchAdImg=!0===t.forceStretchAdImg,this._360ccp=t._360ccp||"top",this.isShow360cc=t.isShow360cc&&!0,this.baiduAdId=t.baiduAdId||"u3433620",this.dongfangNewsId=t.dongfangNewsId||"02151",this._360ccId=t._360ccId||"OBHnX7",this._360adId=t._360adId||"mCzFYt",this.scrollInterval=t.scrollInterval||500,this.scrollTimes=t.scrollTimes||6,this.scrollOptimizeMethod=t.scrollOptimizeMethod||"times",this.hideInfo=t.hideInfo&&!0,this.scrollPosition=t.scrollPosition||"lastPosition",this.isShowFourImg=t.isShowFourImg&&!0,this.isShowBottomNotice=!1!==t.isShowBottomNotice,this.firstAdPosition=t.firstAdPosition||2,this.update=t.update,this.baiduAdIds=t.baiduAdIds||{1:{id:this.baiduAdId,precent:1}},this.baiduccId=t.baiduccId||"",this.isShowBaiducc=t.isShowBaiducc&&!0,this.baiduccPosition=t.baiduccPosition||"top",this.loadDelay=t.loadDelay||200,this.loadInstance=t.loadInstance||300,this.adInsertWay=t.adInsertWay||"ratio",this.showRefreshBtn=t.showRefreshBtn&&!0,this.newsBuffer={nurl:[],nindex:[]},this.target=$l("#"+this.containerId)[0],this.adNumPer=parseInt((this.newsNumPer-1)/this.newsRadio+1),this.adNumFirst=parseInt((this.newsNumFirst-1)/this.newsRadio+1),this.hash=Math.random().toFixed(6).slice(2),this.state={activeIndex:0,pagesList:[],adsenseidList:[],scrollPosition:[]},t.adsenseid||console.error("adsenseid is required"),t.newsAdsenseid||console.error("newsAdsenseid is required"),this.containerId||console.error("containerId is required"),t.dongfangNewsId||console.error("dongfangNewsId is required"),this.isShow360cc&&!t._360ccId&&console.error("_360ccId is required"),this.isShowBaiducc&&!t.baiduccId&&console.error("baiduccId is required"),this.adConfig[360]&&!t._360adId&&console.error("_360adId is required"),this.adConfig.baidu&&!(t.baiduAdId||t.baiduAdIds[1]||t.baiduAdIds[3]||t.baiduAdIds[4])&&console.error("baiduAdIds is required"),$l.iev()<=8&&(delete this.baiduAdIds[3],delete this.baiduAdIds[4],this.baiduAdIds[1].precent=1),this.containerHeight&&$l(this.target).addClass("n256-tab-title-fixed"),this.isShow360cc&&"top"===this._360ccp&&this.create360cc(),this.isShowBaiducc&&"top"===this.baiduccPosition&&this.createBaiducc(),this.createTab(),this.createNewsContainer(),this.newsContainer=$l(this.target).find(".n256-tab-item-container")[0],this.isShow360cc&&"bottom"===this._360ccp&&this.create360cc(),this.isShowBaiducc&&"bottom"===this.baiduccPosition&&this.createBaiducc(),"load"===this.actionAtBottom&&!0===this.isShowBottomNotice&&(this.createLoadNotice(),this.createNoNewsNotice()),this.bindEvent(),this.bindStatisticsEvent(),this.containerHeight&&(this.newsContainer.style.height=this.containerHeight+"px",this.newsContainer.style.overflow="scroll",this.newsContainer.style.overflowX="hidden"),1===this.changeTabWay?e="mouseover":2===this.changeTabWay&&(e="click"),t.init&&t.init(this.newsContainer);var i=this,n=!1;function s(){n||$l("#"+i.containerId).offset().top-(window.pageYOffset||document.documentElement.scrollTop)<=(window.innerHeight||document.documentElement.clientHeight)+i.loadInstance&&($l(i.target).find(".n256-news-tab").child().eq(0).trigger(e),n=!0,window.addEventListener?window.removeEventListener("scroll",s):window.detachEvent("onscroll",s))}window.addEventListener?window.addEventListener("scroll",s):window.attachEvent("onscroll",s),setTimeout(function(){s()},this.loadDelay)}NewsModule.prototype={constructor:NewsModule,createLoadNotice:function(){var t=document.createElement("div"),e=document.createElement("p");t.className="n256-news-loadnotice",t.innerHTML="加载中...",e.className="n256-load-more-btn hide btn",e.innerHTML="点击加载更多",this.newsContainer.appendChild(t),this.newsContainer.appendChild(e)},create360cc:function(){var t=document.createElement("div"),e="n256"+Math.random().toString(26).slice(0,10),i=this._360ccId,n=document.createElement("script");n.src="//static.mediav.com/js/mvf_pm_slider.js",n.setAttribute("charset","utf-8"),t.id=e,this.target.appendChild(t),n.onload=function(){var t={w:280,showid:i,rshowid:i,inject:"inlay",layout:"magicCubeScene",style:"magicCube",row:"2",line:"2"};t.placeholderId=e,"undefined"!=typeof BANNER_SLIDER&&BANNER_SLIDER(t)},document.body.appendChild(n)},createBaiducc:function(){var t=document.createElement("div"),e="n256"+Math.random().toString(16).slice(2),i=this.baiduccId;t.className="baiducc",t.innerHTML='<iframe frameborder="0" width="100%" id="'+e+'" scrolling="no" src="'+this.baiduAdUrl+"?id="+i+"#"+e+'"/>',this.target.appendChild(t)},createNoNewsNotice:function(){var t=document.createElement("div");t.className="n256-nonews-notice hide",t.innerHTML='<a href="javascript:;"  class="btn">暂无内容，点击重新加载</a>',this.newsContainer.appendChild(t)},singleImgNewsTemplate:function(t,e){return'<a class="n256-news-item-singleImg news-item"  target="_blank" href='+t.url+" data-url="+t.url+'><div class="n256-news-img"><img src="'+t.miniimg[0].src+'" alt="" style="height:'+(this.forceStretchNewsImg?"100%":"auto")+'"></div><div class="n256-news-content"><div class="content"><span class="title">'+t.topic+"</span>"+(this.hideInfo?"":'<p class="n256-news-info"><span class="type">'+t.tpch+"</span><span>"+t.source+"</span><span>"+$l.parseTime(1e3*parseInt(t.date))+"</span></p>")+"</div></div></a>"},multiImgNewsTemplate:function(t){return'<a class="n256-news-item-multiImg news-item"  target=_blank href='+t.url+" data-url="+t.url+'><span class="title">'+t.topic+'</span><ul><li><img src="'+t.miniimg[0].src+'" alt="" style="height:'+(this.forceStretchNewsImg?"100%":"auto")+'"></li><li><img src="'+t.miniimg[1].src+'" alt="" style="height:'+(this.forceStretchNewsImg?"100%":"auto")+'"></li><li><img src="'+t.miniimg[2].src+'" alt="" style="height:'+(this.forceStretchNewsImg?"100%":"auto")+'"></li>'+(this.isShowFourImg?"<li>"+(t.miniimg[3]?'<img src="'+t.miniimg[3].src+'" alt="" style="height:'+(this.forceStretchNewsImg?"100%":"auto")+'">':'<span class="check-info">查看详情>></span>')+"</li>":"")+"</ul>"+(this.hideInfo?"":'<p class="n256-news-info"><span class="type">'+t.tpch+"</span><span>"+t.source+"</span><span>"+$l.parseTime(1e3*parseInt(t.date))+"</span></p>")+"</a>"},baiduAdContainer:function(t){return'<div class="ad-baidu" data-num="'+t+'" style="position:relative;"></div>'},_360AdContainer:function(t){return'<div class="ad-360" data-num="'+t+'" style="position:relative;"></div>'},_360AdTemplate:function(t,e){if(!t)return"";var i,n=t.type,s=t.clktk.join(),a=t.imptk.join();return 1==n||4==n||1==this.adMode?i='<a class="n256-news-item-singleImg"  target=_blank href='+t.curl+" data-url="+t.curl+" data-clktk="+s+" data-imptk="+a+'><div class="n256-news-img"><img src="'+(t.img||t.assets[0].img)+'" alt="" style="height:'+(this.forceStretchAdImg?"100%":"auto")+'"></div><div class="n256-news-content"><div class="content"><span class="title">'+t.title+'</span><p class="n256-news-info"><span class="type">广告</span><span>'+t.src+"</span></p></div></div></a>":2==n?i='<a class="n256-news-item-multiImg"  target=_blank href='+t.curl+" data-url="+t.curl+" data-clktk="+s+" data-imptk="+a+'><span class="title">'+(t.topic||t.title||t.desc)+'</span><ul><li><img src="'+t.assets[0].img+'" alt=""></li><li><img src="'+t.assets[1].img+'" alt=""></li><li><img src="'+t.assets[2].img+'" alt=""></li></ul><p class="n256-news-info"><span class="type">广告</span><span>'+t.src+"</span></p></a>":3==n&&(i='<a class="n256-news-item-bigImg"  target=_blank href='+t.curl+" data-url="+t.curl+" data-clktk="+s+" data-imptk="+a+'><span class="title">'+(t.topic||t.title||t.desc)+'</span><div class="big-img"><img src="'+t.img+'" alt=""/></div><p class="n256-news-info"><span class="type">广告</span><span>'+t.src+"</span></p></a>"),i},baiduAdTemplate:function(){var o=0,r=[];return function(t){if(!r.length){for(var e in this.baiduAdIds)this.baiduAdIds.hasOwnProperty(e)&&r.push(this.baiduAdIds[e].id);0===r.length&&r.push(this.baiduAdId)}var i="n256"+Math.random().toString(16).slice(2),n=Math.random(),s=0,a="";if("ratio"===this.adInsertWay){for(var e in this.baiduAdIds)if(this.baiduAdIds.hasOwnProperty(e)){if(s<=n&&n<this.baiduAdIds[e].precent+s){a=this.baiduAdIds[e].id;break}s+=this.baiduAdIds[e].precent}a=a||this.baiduAdId}else"order"===this.adInsertWay&&(a=r[o],o=++o>r.length-1?0:o);return this.adStatistics(1,null,null,t,1002),'<iframe frameborder="0" width="100%" id="'+i+'" scrolling="no" src="'+this.baiduAdUrl+"?id="+a+"#"+i+'"/>'}}(),get360Ad:function(){var s=Math.random().toString(26).slice(2),a=1;return function(t,e,i){var n=this;window["isNewsLoading"+this.hash]=!0,this.adStatistics(1,null,null,e,1001),$l.ajax({method:"jsonp",params:{of:4,newf:1,type:1,showid:n._360adId,uid:s,reqtimes:a,impct:t},jsonp:"jsonp",jsonpCallback:"n360ad",url:"//show.g.mediav.com/s",success:function(t){n.adStatistics(2,null,null,e,1001),window["isNewsLoading"+n.hash]=!1,i&&i(t.ads),a++},error:function(){window["isNewsLoading"+n.hash]=!1,i&&i([])}})}}(),getDongfangNews:function(){var t,r="",d="",c=0,l=((t=$l.cookie("n256NewsUid"))||(t=Math.random().toString(26).slice(2)+Math.random().toString(26).slice(2),$l.cookie("n256NewsUid",t,"forever")),t),n=!0,h=!0;return function(s,a,t){var i,e,o=this;t&&(d=r="",h=!(c=0),o.state.pagesList[o.state.activeIndex]=0,$l(this.target).find(".n256-tab-item")[this.state.activeIndex].innerHTML=""),i=function(t){o.newsStatistics(1),window["isNewsLoading"+o.hash]=!0;var e=o.state.pagesList[o.state.activeIndex]+1,i=h?o.newsNumFirst:o.newsNumPer;h=!1;var n="";switch(o.newsOrigin){case"dongfang":n="//2345jsllq.dftoutiao.com/newsapi_pc/newsjp02";break;case"yingshi":n="//2345yingshi.dftoutiao.com/newsapi_pc/newsjp02";break;default:n="//2345jsllq.dftoutiao.com/newsapi_pc/newsjp02"}$l.ajax({method:"jsonp",url:n,params:{type:o.tabData[o.state.activeIndex][1],startkey:r,newkey:d,pgnum:e,uid:l,idx:c,qid:o.dongfangNewsId,position:t,newsnum:i},success:function(t){o.state.pagesList[o.state.activeIndex]++,r=t.endkey,d=t.newkey,c+=t.data.length,o.newsStatistics(2),window["isNewsLoading"+o.hash]=!1,s&&s(t.data)},error:function(){window["isNewsLoading"+o.hash]=!1,a&&a()}})},e=$l.cookie("n256Position")||"",!n||e?i&&i(e):($l.ajax({method:"jsonp",url:"//guess.union2.50bang.org/adsapi/ci",success:function(t){var e=t.c;i&&i(e),$l.cookie("n256Position",t.c)},error:function(){i&&i(e)},jsonp:"jsonp",jsonpCallback:"n256position"}),n=!1)}}(),getNews:function(){var i=0;return function(t){var e=this;this.getDongfangNews(function(t){if(t||t.length)i=0,e.fillNews(t),e.showNonewsNotice(!1);else{if(++i>=e.reloadTimes)return i=0,e.showNonewsNotice(!0);setTimeout(function(){e.getNews()},e.reloadInterval)}},function(){if(++i>=e.reloadTimes)return i=0,void e.showNonewsNotice(!0);setTimeout(function(){e.getNews()},e.reloadInterval)},t)}}(),createTab:function(){for(var t="",e=0;e<this.tabData.length;e++){var i="|",n=this.tabData[e][2];e===this.tabData.length-1&&(i=""),t+='<span data-type="'+this.tabData[e][1]+'" data-index="'+e+'">'+(n?'<img class=tab-icon src="'+n+'" />':"")+this.tabData[e][0]+"</span>"+i,this.state.pagesList.push(0),this.state.adsenseidList.push(this.adsenseid),this.state.scrollPosition.push(0)}this.showRefreshBtn&&(t+='<p class="refresh-btn">换一换</p>');var s=document.createElement("div");s.className="n256-news-tab"+(this.isShowTab?"":" hide"),s.innerHTML=t,this.target.appendChild(s)},createNewsContainer:function(){var t=document.createElement("div");t.className="n256-tab-item-container",this.target.appendChild(t);for(var e=0;e<this.tabData.length;e++){var i=document.createElement("div");i.className="n256-tab-item",t.appendChild(i)}},refresh:function(){location.href="#"+this.containerId,this.getNews(!0),this.showBottomNotice(!1)},fillNews:function(t,e){for(var i,s=this,n=0,a="",o=$l(this.target).find(".n256-tab-item")[this.state.activeIndex],r=0;r<t.length;r++){var d="";if((r===this.firstAdPosition-2||(r-this.firstAdPosition-1)%this.newsRadio==0&&r+1>this.firstAdPosition)&&this.showAd){var c=Math.random(),l=0;for(var h in this.adConfig)if(this.adConfig.hasOwnProperty(h)){if(c<l+this.adConfig[h]&&l<=c){i=h;break}l+=this.adConfig[h]}switch(i){case"baidu":d=this.baiduAdContainer(this.state.adsenseidList[this.state.activeIndex]);break;case"360":d=this._360AdContainer(this.state.adsenseidList[this.state.activeIndex]),n++}this.state.adsenseidList[this.state.activeIndex]++}1===this.newsMode?i="single":2===this.newsMode?i=3<=t[r].miniimg.length?"multi":"single":3===this.newsMode&&(i=3<=t[r].miniimg.length?.5<=Math.random()?"single":"multi":"single"),a+="multi"==i?this.multiImgNewsTemplate(t[r]):this.singleImgNewsTemplate(t[r]),a+=d}e&&(o.innerHTML="");var u=document.createElement("div");$l(u).attr("data-page",this.state.pagesList[this.state.activeIndex]),$l(u).addClass("page-container"),u.innerHTML=a,o.appendChild(u);var m=$l(u).find(".ad-baidu");for(r=0;r<m.length;r++){var f=$l(m[r]).attr("data-num");m[r].innerHTML=this.baiduAdTemplate([f])}s.adConfig[360]||setTimeout(function(){s.checkShow(null,!0)},600);var g=this;if(n){var p=$l(u).find(".ad-360"),w=[];for(r=0;r<p.length;r++)w.push($l(p[r]).attr("data-num"));this.get360Ad(n,w,function(t){t||(t=[]);for(var e=Math.min(p.length,t.length),i=0;i<e;i++)p[i].innerHTML=g._360AdTemplate(t[i]);if(g.replace360Ad){for(i=t.length;i<p.length;i++){var n=$l(p[i]).attr("data-num");$l(p[i]).removeClass("ad-360").addClass("ad-baidu"),p[i].innerHTML=g.baiduAdTemplate([n])}setTimeout(function(){s.checkShow(null,!0)},600),setTimeout(function(){s.update&&s.update()},0)}})}},showNonewsNotice:function(t){var e=$l(this.target).find(".n256-news-loadnotice"),i=$l(this.target).find(".n256-load-more-btn"),n=$l(this.target).find(".n256-load-more-btn");t?(e.addClass("hide"),i.addClass("hide"),n.removeClass("hide")):(e.removeClass("hide"),i.addClass("hide"),n.addClass("hide"))},showBottomNotice:function(t){var e=$l(this.target).find(".n256-news-loadnotice"),i=t?"已经到底啦，点击重新加载":"加载中...";e[0]&&(e[0].innerHTML=i)},_360Statistics:function(t){function e(t){var e=new Image;e.onload=e.onerror=e.onabort=function(){e.onload=e.onerror=e.onabort=null},e.src=t}for(var i=0;i<t.length;i++)e(t[i])},newsStatistics:function(t,e,i){$l.ajax({method:"jsonp",url:"//guess.union2.50bang.org/trrs",params:{adsenseid:this.newsAdsenseid,user:{uid:""},site:{url:location.href,referer:document.referrer},app:{},device:{userAgent:navigator.userAgent,idfa:"",imei:"",deviceType:0,brand:"",model:"",os:"",osv:"",network:""},data:{type:7,action:"news",acode:t,atime:parseInt((new Date).getTime()/1e3),url:location.href,rurl:document.referrer,tab:this.tabData[this.state.activeIndex][1],nid:"",nurl:e||"",nindex:i||"",hindex:"",channelid:1003}}})},adStatistics:function(t,e,i,n,s){$l.ajax({method:"jsonp",url:"//guess.union2.50bang.org/trrs",params:{adsenseid:this.newsAdsenseid,user:{uid:""},site:{url:location.href,referer:document.referrer},app:{},device:{userAgent:navigator.userAgent,idfa:"",imei:"",deviceType:0,brand:"",model:"",os:"",osv:"",network:""},data:{type:7,action:"ad",acode:t,atime:parseInt((new Date).getTime()/1e3),url:location.href||"",rurl:document.referrer||"",tab:this.tabData[this.state.activeIndex][1],adsenseid:n||"",aurl:e||"",aindex:i||"",channelid:s||""}}})},getAdPosition:function(t){var e=t.offsetX,i=t.offsetY,n=t.target||t.srcElement;return{x:e+n.offsetTop,y:i+n.offsetLeft}},bindEvent:function(){var c=this;function t(){var t,e,i;c.containerHeight?(t=c.newsContainer.scrollHeight,e=c.newsContainer.scrollTop,i=c.newsContainer.clientHeight):(t=document.documentElement.scrollHeight||document.body.scrollHeight,e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight);var n=t-Math.ceil(e+i);if(c.state.scrollPosition[c.state.activeIndex]=e,"fixed"===c.actionAtBottom){var s=$l(c.target).find(".n256-tab-item")[c.state.activeIndex],a=s.offsetHeight,o=$l(c.newsContainer).offset().top,r=window.pageYOffset||(document.documentElement||document.body).scrollTop,d=window.innerHeight||(document.documentElement||document.body).clientHeight;n<=c.topInstance?$l(s)[0].style.paddingBottom=c.topInstance-n+"px":$l(s)[0].style.paddingBottom="0px",a+o-r<=d?$l(s).addClass("fixed-position"):$l(s).removeClass("fixed-position")}else if("load"===c.actionAtBottom){if(c.state.pagesList[c.state.activeIndex]>=c.maxPage)return c.showBottomNotice(!0);if(c.state.pagesList[c.state.activeIndex]>=c.loadPage)return c.showBottomNotice(!0),$l(c.target).find(".n256-news-loadnotice").addClass("hide"),void $l(c.target).find(".n256-load-more-btn").removeClass("hide");n<=c.instance&&(window["isNewsLoading"+c.hash]||c.getNews())}}$l(c.target).find(".n256-load-more-btn").on("click",function(){c.getNews()}),$l(c.target).find(".n256-news-loadnotice").on("click",function(){c.refresh()}),$l(c.target).find(".refresh-btn").on("click",function(){c.refresh()}),$l(c.target).find(".n256-news-tab").on(1===c.changeTabWay?"mouseover":"click","span",function(){c.showBottomNotice(!1),c.state.pagesList[c.state.activeIndex]>=c.loadPage?($l(c.target).find(".n256-news-loadnotice").addClass("hide"),$l(c.target).find(".n256-load-more-btn").removeClass("hide")):($l(c.target).find(".n256-news-loadnotice").removeClass("hide"),$l(c.target).find(".n256-load-more-btn").addClass("hide"));var t=$l(this).attr("isvisited"),e=$l(c.target).find(".n256-news-tab").child("span"),i=$l(this).attr("data-index");$l(this).attr("data-type");$l(e[c.state.activeIndex]).removeClass("active-tab"),$l(e[i]).addClass("active-tab");var e=$l(c.target).find(".n256-tab-item");$l(e[c.state.activeIndex]).removeClass("active-tab-item"),$l(e[i]).addClass("active-tab-item"),c.state.activeIndex=i;var n=c.state.scrollPosition[c.state.activeIndex];c.containerHeight?"top"===c.scrollPosition?c.newsContainer.scrollTop=0:"lastPosition"===c.scrollPosition&&(c.newsContainer.scrollTop=n):"top"===c.scrollPosition?window.scrollTo(0,0):"lastPosition"===c.scrollPosition&&window.scrollTo(0,n);{if(t)return;window["isNewsLoading"+c.hash]||(c.getNews(!0),$l(this).attr("isvisited","true"))}});var e=c.containerHeight?c.newsContainer:window;window.addEventListener?e.addEventListener("scroll",t):e.attachEvent("onscroll",t)},bindStatisticsEvent:function(){var c,w=this;$l(w.target).on("mousedown",".ad-360",function(t){c=(new Date).getTime()}),$l(w.target).on("mouseup",".ad-360",function(t){if(2!==t.button){var e=$l($l(this).child()[0]),i=e.attr("data-clktk"),n=(new Date).getTime();i=(i=(i=(i=(i=i.replace("__EVENT_TIME_START__",c)).replace("__EVENT_TIME_END__",n)).replace("__OFFSET_X__",w.getAdPosition(t).x)).replace("__OFFSET_Y__",w.getAdPosition(t).y)).split(",");var s=e.attr("data-url");s=(s=(s=(s=s.replace("__EVENT_TIME_START__",c)).replace("__EVENT_TIME_END__",n)).replace("__OFFSET_X__",w.getAdPosition(t).x)).replace("__OFFSET_Y__",w.getAdPosition(t).y),e.attr("href",s),w._360Statistics(i);var a,o=s,r=$l(this.parentNode).attr("data-page");a=2<=r?$l(this).index()+(r-2)*(w.newsNumPer+w.adNumPer)+(w.adNumFirst+w.newsNumFirst):$l(this).index();var d=$l(this).attr("data-num");w.adStatistics(4,o,a+1,[d],"1001")}}),$l(w.target).on("click",".news-item",function(t){if(2!==t.button){var e=$l(this).attr("data-url"),i=0,n=$l(this.parentNode).attr("data-page");i=2<=n?$l(this).index()+(n-2)*(w.newsNumPer+w.adNumPer)+(w.adNumFirst+w.newsNumFirst):$l(this).index(),w.newsStatistics(4,[e],[i+1]);$l(this).attr("data-url")}});var v,b,I,t=w.containerHeight?w.newsContainer:window,e=(I=b=v=0,function(t,e){if(!e)if(b++,"times"===w.scrollOptimizeMethod){if(!(b>=w.scrollTimes))return;b=0}else{if(!((I=(new Date).getTime())-v>w.scrollInterval))return;v=I}for(var i=$l(w.target).find(".n256-tab-item").eq(w.state.activeIndex),n=i.find(".news-item"),s=i.find(".ad-360"),a=i.find(".ad-baidu"),o=0;o<n.length;o++)if(!(c=$l(n[o]).attr("isvisited"))&&$l(n[o]).isInView(w.containerHeight,w.showSpace)){var r=0,d=$l(n[o]).attr("data-url");r=2<=(p=$l(n[o].parentNode).attr("data-page"))?$l(n[o]).index()+(p-2)*(w.newsNumPer+w.adNumPer)+(w.adNumFirst+w.newsNumFirst):$l(n[o]).index(),w.newsBuffer.nurl.push(d),w.newsBuffer.nindex.push(r+1),$l(n[o]).attr("isvisited","true")}for(o=0;o<s.length;o++){var c=(g=$l(s[o])).attr("isvisited");if(g.isInView(w.containerHeight,w.showSpace)&&!c&&g.child().length){var l=g.attr("data-url"),h=g.attr("data-num"),u=0,m=1001;if(u=2<=(p=$l(g[0].parentNode).attr("data-page"))?g.index()+(p-2)*(w.newsNumPer+w.adNumPer)+(w.adNumFirst+w.newsNumFirst):g.index(),w.adStatistics(3,l,u+1,[h],m),g.child()[0]){var f=$l(g.child()[0]).attr("data-imptk").split(",");w._360Statistics(f)}g.attr("isvisited","true")}}for(o=0;o<a.length;o++){var g,p;if(c=(g=$l(a[o])).attr("isvisited"),g.isInView(w.containerHeight,w.showSpace)&&!c&&10<=g[0].offsetHeight)l=g.attr("data-url"),h=g.attr("data-num"),u=0,m=1002,u=2<=(p=$l(a[o].parentNode).attr("data-page"))?g.index()+(p-2)*(w.newsNumPer+w.adNumPer)+(w.adNumFirst+w.newsNumFirst):g.index(),w.adStatistics(3,l,u+1,[h],m),g.attr("isvisited","true")}});this.checkShow=e,window.addEventListener?t.addEventListener("scroll",e):t.attachEvent("onscroll",e),setInterval(function(){w.newsBuffer.nurl&&w.newsBuffer.nurl.length&&w.newsStatistics(3,w.newsBuffer.nurl,w.newsBuffer.nindex),w.newsBuffer.nurl.length=0,w.newsBuffer.nindex.length=0},w.statisticsInterval)}};